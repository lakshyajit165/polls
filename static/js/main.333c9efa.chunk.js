(this["webpackJsonppolling-app-client"]=this["webpackJsonppolling-app-client"]||[]).push([[0],{183:function(e,t,a){e.exports=a.p+"static/media/poll.1bc024be.svg"},188:function(e,t,a){e.exports=a(391)},193:function(e,t,a){},196:function(e,t,a){},204:function(e,t,a){},259:function(e,t,a){},266:function(e,t,a){},363:function(e,t,a){},364:function(e,t,a){},383:function(e,t,a){},384:function(e,t,a){},385:function(e,t,a){},390:function(e,t,a){},391:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(6),l=a.n(r),o=(a(193),a(69),a(25)),i=a(17),c=a(18),u=a(13),m=a(20),h=a(21),d=(a(144),a(77)),p=(a(196),a(53)),g=Object({NODE_ENV:"production",PUBLIC_URL:"/polls",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_BASE_URL||"https://ec2-13-233-122-120.ap-south-1.compute.amazonaws.com:5000/api",v=function(e){var t=new Headers({"Content-Type":"application/json"});localStorage.getItem("accessToken")&&t.append("Authorization","Bearer "+localStorage.getItem("accessToken"));var a={headers:t};return e=Object.assign({},a,e),fetch(e.url,e).then((function(e){return e.json().then((function(t){return e.ok?t:Promise.reject(t)}))}))};function f(e,t){return v({url:g+"/polls?page="+(e=e||0)+"&size="+(t=t||30),method:"GET"})}function b(e,t,a){return v({url:g+"/users/"+e+"/polls?page="+(t=t||0)+"&size="+(a=a||30),method:"GET"})}function E(e,t,a){return v({url:g+"/users/"+e+"/votes?page="+(t=t||0)+"&size="+(a=a||30),method:"GET"})}a(41);var y=a(14),S=(a(55),a(4)),C=(a(199),a(184)),O=(a(145),a(98)),k=(a(202),a(143)),N=(a(204),a(22)),P=["#F44336","#e91e63","#9c27b0","#673ab7","#ff9800","#ff5722","#795548","#607d8b","#3f51b5","#2196F3","#00bcd4","#009688","#2196F3","#32c787","#00BCD4","#ff5652","#ffc107","#ff85af","#FF9800","#39bbb0","#4CAF50","#ffeb3b","#ffc107"];function j(e){e=e.substr(0,6);for(var t=0,a=0;a<e.length;a++)t=31*t+e.charCodeAt(a);var n=Math.abs(t%P.length);return P[n]}var L=k.a.Group;function w(e){return s.a.createElement("div",{className:"cv-poll-choice"},s.a.createElement("span",{className:"cv-poll-choice-details"},s.a.createElement("span",{className:"cv-choice-percentage"},Math.round(100*e.percentVote)/100,"%"),s.a.createElement("span",{className:"cv-choice-text"},e.choice.text),e.isSelected?s.a.createElement(S.a,{className:"selected-choice-icon",type:"check-circle-o"}):null),s.a.createElement("span",{className:e.isWinner?"cv-choice-percent-chart winner":"cv-choice-percent-chart",style:{width:e.percentVote+"%"}}))}var M=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={visible:!1,currentPollId:0},e.showModal=function(t){e.setState({visible:!0,currentPollId:t})},e.handleOk=function(t){e.props.deletePoll(e.state.currentPollId),e.setState({visible:!1})},e.handleCancel=function(t){e.setState({visible:!1})},e.calculatePercentage=function(t){return 0===e.props.poll.totalVotes?0:100*t.voteCount/e.props.poll.totalVotes},e.isSelected=function(t){return e.props.poll.selectedChoice===t.id},e.getWinningChoice=function(){return e.props.poll.choices.reduce((function(e,t){return t.voteCount>e.voteCount?t:e}),{voteCount:-1/0})},e.getTimeRemaining=function(e){var t=new Date(e.expirationDateTime).getTime()-(new Date).getTime(),a=Math.floor(t/1e3%60),n=Math.floor(t/1e3/60%60),s=Math.floor(t/36e5%24),r=Math.floor(t/864e5);return r>0?r+" days left":s>0?s+" hours left":n>0?n+" minutes left":a>0?a+" seconds left":"less than a second left"},e.checkIfPollCreatedByCurrentUser=function(){if(e.props.currentLoggedInUser)return e.props.poll.createdBy.username===e.props.currentLoggedInUser.username},e.deletePoll=function(){console.log(e.props.poll.createdBy.username),console.log(e.props.currentLoggedInUser)},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=[];if(this.props.poll.selectedChoice||this.props.poll.expired){var a=this.props.poll.expired?this.getWinningChoice():null;this.props.poll.choices.forEach((function(n){t.push(s.a.createElement(w,{key:n.id,choice:n,isWinner:a&&n.id===a.id,isSelected:e.isSelected(n),percentVote:e.calculatePercentage(n)}))}))}else this.props.poll.choices.forEach((function(e){t.push(s.a.createElement(k.a,{className:"poll-choice-radio",key:e.id,value:e.id},e.text))}));return s.a.createElement("div",{className:"poll-content"},s.a.createElement("div",{className:"poll-header"},s.a.createElement("div",{className:"poll-creator-info"},s.a.createElement(N.b,{className:"creator-link",to:"/users/".concat(this.props.poll.createdBy.username)},s.a.createElement(O.a,{className:"poll-creator-avatar",style:{backgroundColor:j(this.props.poll.createdBy.name)}},this.props.poll.createdBy.name[0].toUpperCase()),s.a.createElement("span",{className:"poll-creator-name"},this.props.poll.createdBy.name),s.a.createElement("span",{className:"poll-creator-username"},"@",this.props.poll.createdBy.username),s.a.createElement("span",{className:"poll-creation-date"},function(e){var t=new Date(e),a=t.getMonth(),n=t.getFullYear();return t.getDate()+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a]+" "+n+" - "+t.getHours()+":"+t.getMinutes()}(this.props.poll.creationDateTime)))),s.a.createElement("div",{className:"poll-question"},this.props.poll.question)),s.a.createElement("div",{className:"poll-choices"},s.a.createElement(L,{className:"poll-choice-radio-group",onChange:this.props.handleVoteChange,value:this.props.currentVote},t)),s.a.createElement("div",{className:"poll-footer"},this.props.poll.selectedChoice||this.props.poll.expired?null:s.a.createElement(y.a,{className:"vote-button",disabled:!this.props.currentVote,onClick:this.props.handleVoteSubmit},"Vote"),s.a.createElement("span",{className:"total-votes"},this.props.poll.totalVotes," votes"),s.a.createElement("span",{className:"separator"},"\u2022"),s.a.createElement("span",{className:"time-left"},this.props.poll.expired?"Final results":this.getTimeRemaining(this.props.poll)),s.a.createElement("span",{className:"poll-delete-btn",onClick:function(){return e.showModal(e.props.poll.id)}},this.checkIfPollCreatedByCurrentUser()?s.a.createElement(S.a,{type:"delete",style:{fontSize:"25px",marginLeft:"10px"}}):s.a.createElement("div",null))),s.a.createElement(C.a,{title:"Delete Poll",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},s.a.createElement("h2",{style:{fontFamily:"Questrial"}},"Are you sure you want to delete this poll?")))}}]),a}(n.Component),A=(a(252),a(176));function U(e){var t=s.a.createElement(S.a,{type:"loading-3-quarters",style:{fontSize:30},spin:!0});return s.a.createElement(A.a,{indicator:t,style:{display:"block",textAlign:"center",marginTop:30}})}a(259);var x=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.deleteSinglePoll=function(e){(function(e){return v({url:g+"/polls/"+e,method:"DELETE"})})(e).then((function(t){console.log(t),o.a.success({message:"Polling App",description:"Poll deleted!"}),n.setState({polls:n.state.polls.filter((function(t){return t.id!==e}))})})).catch((function(e){console.log(e),o.a.error({message:"Polling App",description:"An error occurred!"})}))},n.state={polls:[],page:0,size:10,totalElements:0,totalPages:0,last:!0,currentVotes:[],isLoading:!1},n.loadPollList=n.loadPollList.bind(Object(u.a)(n)),n.handleLoadMore=n.handleLoadMore.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"loadPollList",value:function(){var e,t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;this.props.username?"USER_CREATED_POLLS"===this.props.type?e=b(this.props.username,a,n):"USER_VOTED_POLLS"===this.props.type&&(e=E(this.props.username,a,n)):e=f(a,n),e&&(this.setState({isLoading:!0}),e.then((function(e){var a=t.state.polls.slice(),n=t.state.currentVotes.slice();t._isMounted&&t.setState({polls:a.concat(e.content),page:e.page,size:e.size,totalElements:e.totalElements,totalPages:e.totalPages,last:e.last,currentVotes:n.concat(Array(e.content.length).fill(null)),isLoading:!1})})).catch((function(e){t.setState({isLoading:!1})})))}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.loadPollList()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidUpdate",value:function(e){this.props.isAuthenticated!==e.isAuthenticated&&(this.setState({polls:[],page:0,size:10,totalElements:0,totalPages:0,last:!0,currentVotes:[],isLoading:!1}),this.loadPollList())}},{key:"handleLoadMore",value:function(){this.loadPollList(this.state.page+1)}},{key:"handleVoteChange",value:function(e,t){var a=this.state.currentVotes.slice();a[t]=e.target.value,this.setState({currentVotes:a})}},{key:"handleVoteSubmit",value:function(e,t){var a=this;if(e.preventDefault(),!this.props.isAuthenticated)return this.props.history.push("/login"),void o.a.info({message:"Polling App",description:"Please login to vote."});var n=this.state.polls[t],s=this.state.currentVotes[t];(function(e){return v({url:g+"/polls/"+e.pollId+"/votes",method:"POST",body:JSON.stringify(e)})})({pollId:n.id,choiceId:s}).then((function(e){var n=a.state.polls.slice();n[t]=e,a.setState({polls:n})})).catch((function(e){401===e.status?a.props.handleLogout("/login","error","You have been logged out. Please login to vote"):o.a.error({message:"Polling App",description:e.message||"Sorry! Something went wrong. Please try again!"})}))}},{key:"render",value:function(){var e=this,t=[];return this.state.polls.forEach((function(a,n){t.push(s.a.createElement(M,{key:a.id,poll:a,currentVote:e.state.currentVotes[n],handleVoteChange:function(t){return e.handleVoteChange(t,n)},handleVoteSubmit:function(t){return e.handleVoteSubmit(t,n)},currentLoggedInUser:e.props.currentUser,deletePoll:e.deleteSinglePoll,history:e.props.history}))})),s.a.createElement("div",{className:"polls-container"},t,this.state.isLoading||0!==this.state.polls.length?null:s.a.createElement("div",{className:"no-polls-found"},s.a.createElement("span",null,"No Polls Found.")),this.state.isLoading||this.state.last?null:s.a.createElement("div",{className:"load-more-polls"},s.a.createElement(y.a,{type:"dashed",onClick:this.handleLoadMore,disabled:this.state.isLoading},s.a.createElement(S.a,{type:"plus"})," Load more")),this.state.isLoading?s.a.createElement(U,null):null)}}]),a}(n.Component),T=Object(p.g)(x),I=(a(260),a(140)),D=a(62),V=a(142),_=(a(128),a(39)),F=(a(129),a(46)),z=(a(393),a(106)),B=(a(266),z.a.Option),q=F.a.Item,R=_.a.TextArea;function J(e){return s.a.createElement(q,{validateStatus:e.choice.validateStatus,help:e.choice.errorMsg,className:"poll-form-row"},s.a.createElement(_.a,{placeholder:"Choice "+(e.choiceNumber+1),size:"large",value:e.choice.text,className:e.choiceNumber>1?"optional-choice":null,onChange:function(t){return e.handleChoiceChange(t,e.choiceNumber)}}),e.choiceNumber>1?s.a.createElement(S.a,{className:"dynamic-delete-button",type:"close",disabled:e.choiceNumber<=1,onClick:function(){return e.removeChoice(e.choiceNumber)}}):null)}var W=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).validateQuestion=function(e){return 0===e.length?{validateStatus:"error",errorMsg:"Please enter your question!"}:e.length>140?{validateStatus:"error",errorMsg:"Question is too long (Maximum ".concat(140," characters allowed)")}:{validateStatus:"success",errorMsg:null}},n.validateChoice=function(e){return 0===e.length?{validateStatus:"error",errorMsg:"Please enter a choice!"}:e.length>40?{validateStatus:"error",errorMsg:"Choice is too long (Maximum ".concat(40," characters allowed)")}:{validateStatus:"success",errorMsg:null}},n.state={question:{text:""},choices:[{text:""},{text:""}],pollLength:{days:1,hours:0}},n.addChoice=n.addChoice.bind(Object(u.a)(n)),n.removeChoice=n.removeChoice.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n.handleQuestionChange=n.handleQuestionChange.bind(Object(u.a)(n)),n.handleChoiceChange=n.handleChoiceChange.bind(Object(u.a)(n)),n.handlePollDaysChange=n.handlePollDaysChange.bind(Object(u.a)(n)),n.handlePollHoursChange=n.handlePollHoursChange.bind(Object(u.a)(n)),n.isFormInvalid=n.isFormInvalid.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"addChoice",value:function(e){var t=this.state.choices.slice();this.setState({choices:t.concat([{text:""}])})}},{key:"removeChoice",value:function(e){var t=this.state.choices.slice();this.setState({choices:[].concat(Object(V.a)(t.slice(0,e)),Object(V.a)(t.slice(e+1)))})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),function(e){return v({url:g+"/polls",method:"POST",body:JSON.stringify(e)})}({question:this.state.question.text,choices:this.state.choices.map((function(e){return{text:e.text}})),pollLength:this.state.pollLength}).then((function(e){t.props.history.push("/")})).catch((function(e){401===e.status?t.props.handleLogout("/login","error","You have been logged out. Please login create poll."):o.a.error({message:"Polling App",description:e.message||"Sorry! Something went wrong. Please try again!"})}))}},{key:"handleQuestionChange",value:function(e){var t=e.target.value;this.setState({question:Object(D.a)({text:t},this.validateQuestion(t))})}},{key:"handleChoiceChange",value:function(e,t){var a=this.state.choices.slice(),n=e.target.value;a[t]=Object(D.a)({text:n},this.validateChoice(n)),this.setState({choices:a})}},{key:"handlePollDaysChange",value:function(e){var t=Object.assign(this.state.pollLength,{days:e});this.setState({pollLength:t})}},{key:"handlePollHoursChange",value:function(e){var t=Object.assign(this.state.pollLength,{hours:e});this.setState({pollLength:t})}},{key:"isFormInvalid",value:function(){if("success"!==this.state.question.validateStatus)return!0;for(var e=0;e<this.state.choices.length;e++){if("success"!==this.state.choices[e].validateStatus)return!0}}},{key:"render",value:function(){var e=this,t=[];return this.state.choices.forEach((function(a,n){t.push(s.a.createElement(J,{key:n,choice:a,choiceNumber:n,removeChoice:e.removeChoice,handleChoiceChange:e.handleChoiceChange}))})),s.a.createElement("div",{className:"new-poll-container"},s.a.createElement("h1",{className:"page-title"},"Create Poll"),s.a.createElement("div",{className:"new-poll-content"},s.a.createElement(F.a,{onSubmit:this.handleSubmit,className:"create-poll-form"},s.a.createElement(q,{validateStatus:this.state.question.validateStatus,help:this.state.question.errorMsg,className:"poll-form-row"},s.a.createElement(R,{placeholder:"Enter your question",style:{fontSize:"16px"},autoSize:{minRows:3,maxRows:6},name:"question",value:this.state.question.text,onChange:this.handleQuestionChange})),t,s.a.createElement(q,{className:"poll-form-row"},s.a.createElement(y.a,{type:"dashed",onClick:this.addChoice,disabled:6===this.state.choices.length},s.a.createElement(S.a,{type:"plus"})," Add a choice")),s.a.createElement(q,{className:"poll-form-row"},s.a.createElement(I.a,{xs:24,sm:4},"Poll length:"),s.a.createElement(I.a,{xs:24,sm:20},s.a.createElement("span",{style:{marginRight:"18px"}},s.a.createElement(z.a,{name:"days",defaultValue:"1",onChange:this.handlePollDaysChange,value:this.state.pollLength.days,style:{width:60}},Array.from(Array(8).keys()).map((function(e){return s.a.createElement(B,{key:e},e)})))," \xa0Days"),s.a.createElement("span",null,s.a.createElement(z.a,{name:"hours",defaultValue:"0",onChange:this.handlePollHoursChange,value:this.state.pollLength.hours,style:{width:60}},Array.from(Array(24).keys()).map((function(e){return s.a.createElement(B,{key:e},e)})))," \xa0Hours"))),s.a.createElement(q,{className:"poll-form-row"},s.a.createElement(y.a,{type:"primary",htmlType:"submit",size:"large",disabled:this.isFormInvalid(),className:"create-poll-form-button"},"Create Poll")))))}}]),a}(n.Component),H=(a(363),F.a.Item),Y=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=F.a.create()(G);return s.a.createElement("div",{className:"login-container"},s.a.createElement("h1",{className:"page-title"},"Login"),s.a.createElement("div",{className:"login-content"},s.a.createElement(e,{onLogin:this.props.onLogin})))}}]),a}(n.Component),G=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFields((function(e,a){e||function(e){return v({url:g+"/auth/signin",method:"POST",body:JSON.stringify(e)})}(Object.assign({},a)).then((function(e){localStorage.setItem("accessToken",e.accessToken),t.props.onLogin()})).catch((function(e){401===e.status?o.a.error({message:"Polling App",description:"Your Username or Password is incorrect. Please try again!"}):o.a.error({message:"Polling App",description:e.message||"Sorry! Something went wrong. Please try again!"})}))}))}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return s.a.createElement(F.a,{onSubmit:this.handleSubmit,className:"login-form"},s.a.createElement(H,null,e("usernameOrEmail",{rules:[{required:!0,message:"Please input your username or email!"}]})(s.a.createElement(_.a,{prefix:s.a.createElement(S.a,{type:"user"}),size:"large",name:"usernameOrEmail",placeholder:"Username or Email"}))),s.a.createElement(H,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(s.a.createElement(_.a,{prefix:s.a.createElement(S.a,{type:"lock"}),size:"large",name:"password",type:"password",placeholder:"Password"}))),s.a.createElement(H,null,s.a.createElement(y.a,{type:"primary",htmlType:"submit",size:"large",className:"login-form-button"},"Login"),"Or ",s.a.createElement(N.b,{to:"/signup"},"register now!")))}}]),a}(n.Component),Q=Y,K=a(104),$=(a(364),a(182)),X=a.n($),Z=F.a.Item,ee=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).validateName=function(e){return e.length<4?{validateStatus:"error",errorMsg:"Name is too short (Minimum ".concat(4," characters needed.)")}:e.length>40?{validationStatus:"error",errorMsg:"Name is too long (Maximum ".concat(40," characters allowed.)")}:{validateStatus:"success",errorMsg:null}},n.validateEmail=function(e){return e?RegExp("[^@ ]+@[^@ ]+\\.[^@ ]+").test(e)?e.length>40?{validateStatus:"error",errorMsg:"Email is too long (Maximum ".concat(40," characters allowed)")}:{validateStatus:null,errorMsg:null}:{validateStatus:"error",errorMsg:"Email not valid"}:{validateStatus:"error",errorMsg:"Email may not be empty"}},n.validateUsername=function(e){return e.length<3?{validateStatus:"error",errorMsg:"Username is too short (Minimum ".concat(3," characters needed.)")}:e.length>15?{validationStatus:"error",errorMsg:"Username is too long (Maximum ".concat(15," characters allowed.)")}:{validateStatus:null,errorMsg:null}},n.validatePassword=function(e){return e.length<6?{validateStatus:"error",errorMsg:"Password is too short (Minimum ".concat(6," characters needed.)")}:e.length>20?{validationStatus:"error",errorMsg:"Password is too long (Maximum ".concat(20," characters allowed.)")}:{validateStatus:"success",errorMsg:null}},n.state={name:{value:""},username:{value:""},email:{value:""},password:{value:""}},n.handleInputChange=n.handleInputChange.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n.validateUsernameAvailability=n.validateUsernameAvailability.bind(Object(u.a)(n)),n.validateEmailAvailability=n.validateEmailAvailability.bind(Object(u.a)(n)),n.isFormInvalid=n.isFormInvalid.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"handleInputChange",value:function(e,t){var a=e.target,n=a.name,s=a.value;this.setState(Object(K.a)({},n,Object(D.a)({value:s},t(s))))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={name:this.state.name.value,email:this.state.email.value,username:this.state.username.value,password:this.state.password.value};X.a.post("http://apilayer.net/api/check?access_key=".concat("faa9e626f38daa5e02e1e3f821a624e5","&email=").concat(this.state.email.value,"&smtp=1&format=1")).then((function(e){!0===e.data.smtp_check&&!0===e.data.format_valid?function(e){return v({url:g+"/auth/signup",method:"POST",body:JSON.stringify(e)})}(a).then((function(e){o.a.success({message:"Polling App",description:"Thank you! You're successfully registered. Please Login to continue!"}),t.props.history.push("/login")})).catch((function(e){o.a.error({message:"Polling App",description:e.message||"Sorry! Something went wrong. Please try again!"})})):o.a.warning({message:"Polling App",description:"Oops! Please enter a valid email address!"})})).catch((function(e){o.a.error({message:"Polling App",description:e.message||"Uh-Oh! Could not validate email. Please try again!"})}))}},{key:"isFormInvalid",value:function(){return!("success"===this.state.name.validateStatus&&"success"===this.state.username.validateStatus&&"success"===this.state.email.validateStatus&&"success"===this.state.password.validateStatus)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"signup-container"},s.a.createElement("h1",{className:"page-title"},"Sign Up"),s.a.createElement("div",{className:"signup-content"},s.a.createElement(F.a,{onSubmit:this.handleSubmit,className:"signup-form"},s.a.createElement(Z,{label:"Full Name",validateStatus:this.state.name.validateStatus,help:this.state.name.errorMsg},s.a.createElement(_.a,{size:"large",name:"name",autoComplete:"off",placeholder:"Your full name",value:this.state.name.value,onChange:function(t){return e.handleInputChange(t,e.validateName)}})),s.a.createElement(Z,{label:"Username",hasFeedback:!0,validateStatus:this.state.username.validateStatus,help:this.state.username.errorMsg},s.a.createElement(_.a,{size:"large",name:"username",autoComplete:"off",placeholder:"A unique username",value:this.state.username.value,onBlur:this.validateUsernameAvailability,onChange:function(t){return e.handleInputChange(t,e.validateUsername)}})),s.a.createElement(Z,{label:"Email",hasFeedback:!0,validateStatus:this.state.email.validateStatus,help:this.state.email.errorMsg},s.a.createElement(_.a,{size:"large",name:"email",type:"email",autoComplete:"off",placeholder:"Your email",value:this.state.email.value,onBlur:this.validateEmailAvailability,onChange:function(t){return e.handleInputChange(t,e.validateEmail)}})),s.a.createElement(Z,{label:"Password",validateStatus:this.state.password.validateStatus,help:this.state.password.errorMsg},s.a.createElement(_.a,{size:"large",name:"password",type:"password",autoComplete:"off",placeholder:"A password between 6 to 20 characters",value:this.state.password.value,onChange:function(t){return e.handleInputChange(t,e.validatePassword)}})),s.a.createElement(Z,null,s.a.createElement(y.a,{type:"primary",htmlType:"submit",size:"large",className:"signup-form-button",disabled:this.isFormInvalid()},"Sign up"),"Already registed? ",s.a.createElement(N.b,{to:"/login"},"Login now!")))))}},{key:"validateUsernameAvailability",value:function(){var e,t=this,a=this.state.username.value,n=this.validateUsername(a);"error"!==n.validateStatus?(this.setState({username:{value:a,validateStatus:"validating",errorMsg:null}}),(e=a,v({url:g+"/user/checkUsernameAvailability?username="+e,method:"GET"})).then((function(e){e.available?t.setState({username:{value:a,validateStatus:"success",errorMsg:null}}):t.setState({username:{value:a,validateStatus:"error",errorMsg:"This username is already taken"}})})).catch((function(e){t.setState({username:{value:a,validateStatus:"success",errorMsg:null}})}))):this.setState({username:Object(D.a)({value:a},n)})}},{key:"validateEmailAvailability",value:function(){var e,t=this,a=this.state.email.value,n=this.validateEmail(a);"error"!==n.validateStatus?(this.setState({email:{value:a,validateStatus:"validating",errorMsg:null}}),(e=a,v({url:g+"/user/checkEmailAvailability?email="+e,method:"GET"})).then((function(e){e.available?t.setState({email:{value:a,validateStatus:"success",errorMsg:null}}):t.setState({email:{value:a,validateStatus:"error",errorMsg:"This Email is already registered"}})})).catch((function(e){t.setState({email:{value:a,validateStatus:"success",errorMsg:null}})}))):this.setState({email:Object(D.a)({value:a},n)})}}]),a}(n.Component),te=(a(381),a(141)),ae=(a(383),a(384),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"page-not-found"},s.a.createElement("h1",{className:"title"},"404"),s.a.createElement("div",{className:"desc"},"The Page you're looking for was not found."),s.a.createElement(N.b,{to:"/"},s.a.createElement(y.a,{className:"go-back-btn",type:"primary",size:"large"},"Go Back")))}}]),a}(n.Component)),ne=(a(385),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"server-error-page"},s.a.createElement("h1",{className:"server-error-title"},"500"),s.a.createElement("div",{className:"server-error-desc"},"Oops! Something went wrong at our Server. Why don't you go back?"),s.a.createElement(N.b,{to:"/"},s.a.createElement(y.a,{className:"server-error-go-back-btn",type:"primary",size:"large"},"Go Back")))}}]),a}(n.Component)),se=te.a.TabPane,re=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={user:null,isLoading:!1},n.loadUserProfile=n.loadUserProfile.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"loadUserProfile",value:function(e){var t=this;this.setState({isLoading:!0}),function(e){return v({url:g+"/users/"+e,method:"GET"})}(e).then((function(e){t._isMounted&&t.setState({user:e,isLoading:!1})})).catch((function(e){404===e.status?t.setState({notFound:!0,isLoading:!1}):t.setState({serverError:!0,isLoading:!1})}))}},{key:"componentDidMount",value:function(){this._isMounted=!0;var e=this.props.match.params.username;this.loadUserProfile(e)}},{key:"componentDidUpdate",value:function(e){this.props.match.params.username!==e.match.params.username&&this.loadUserProfile(e.match.params.username)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){if(this.state.isLoading)return s.a.createElement(U,null);if(this.state.notFound)return s.a.createElement(ae,null);if(this.state.serverError)return s.a.createElement(ne,null);return s.a.createElement("div",{className:"profile"},this.state.user?s.a.createElement("div",{className:"user-profile"},s.a.createElement("div",{className:"user-details"},s.a.createElement("div",{className:"user-avatar"},s.a.createElement(O.a,{className:"user-avatar-circle",style:{backgroundColor:j(this.state.user.name)}},this.state.user.name[0].toUpperCase())),s.a.createElement("div",{className:"user-summary"},s.a.createElement("div",{className:"full-name"},this.state.user.name),s.a.createElement("div",{className:"username"},"@",this.state.user.username),s.a.createElement("div",{className:"user-joined"},"Joined ",function(e){var t=new Date(e),a=t.getMonth(),n=t.getFullYear();return["January","February","March","April","May","June","July","August","September","October","November","December"][a]+" "+n}(this.state.user.joinedAt)))),s.a.createElement("div",{className:"user-poll-details"},s.a.createElement(te.a,{defaultActiveKey:"1",animated:!1,tabBarStyle:{textAlign:"center"},size:"large",className:"profile-tabs"},s.a.createElement(se,{tab:"".concat(this.state.user.pollCount," Polls"),key:"1"},s.a.createElement(T,{username:this.props.match.params.username,type:"USER_CREATED_POLLS"})),s.a.createElement(se,{tab:"".concat(this.state.user.voteCount," Votes"),key:"2"},s.a.createElement(T,{username:this.props.match.params.username,type:"USER_VOTED_POLLS"}))))):null)}}]),a}(n.Component),le=(a(386),a(185)),oe=(a(392),a(38)),ie=(a(390),a(183)),ce=a.n(ie),ue=d.a.Header,me=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleMenuClick=n.handleMenuClick.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"handleMenuClick",value:function(e){"logout"===e.key&&this.props.onLogout()}},{key:"render",value:function(){var e;return e=this.props.currentUser?[s.a.createElement(oe.a.Item,{key:"/"},s.a.createElement(N.b,{to:"/"},s.a.createElement(S.a,{type:"home",className:"nav-icon"}))),s.a.createElement(oe.a.Item,{key:"/poll/new"},s.a.createElement(N.b,{to:"/poll/new"},s.a.createElement("img",{src:ce.a,alt:"poll",className:"poll-icon"}))),s.a.createElement(oe.a.Item,{key:"/profile",className:"profile-menu"},s.a.createElement(he,{currentUser:this.props.currentUser,handleMenuClick:this.handleMenuClick}))]:[s.a.createElement(oe.a.Item,{key:"/login"},s.a.createElement(N.b,{to:"/login"},"Login")),s.a.createElement(oe.a.Item,{key:"/signup"},s.a.createElement(N.b,{to:"/signup"},"Signup"))],s.a.createElement(ue,{className:"app-header"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"app-title"},s.a.createElement(N.b,{to:"/"},"PollsForYou")),s.a.createElement(oe.a,{className:"app-menu",mode:"horizontal",selectedKeys:[this.props.location.pathname],style:{lineHeight:"64px"}},e)))}}]),a}(n.Component);function he(e){var t=s.a.createElement(oe.a,{onClick:e.handleMenuClick,className:"profile-dropdown-menu"},s.a.createElement(oe.a.Item,{key:"user-info",className:"dropdown-item",disabled:!0},s.a.createElement("div",{className:"user-full-name-info"},e.currentUser.name),s.a.createElement("div",{className:"username-info"},"@",e.currentUser.username)),s.a.createElement(oe.a.Divider,null),s.a.createElement(oe.a.Item,{key:"profile",className:"dropdown-item"},s.a.createElement(N.b,{to:"/users/".concat(e.currentUser.username)},s.a.createElement(S.a,{type:"user"}),"Profile")),s.a.createElement(oe.a.Item,{key:"logout",className:"dropdown-item"},s.a.createElement(S.a,{type:"logout"}),"Logout"));return s.a.createElement(le.a,{overlay:t,trigger:["click"],getPopupContainer:function(){return document.getElementsByClassName("profile-menu")[0]}},s.a.createElement("a",{className:"ant-dropdown-link"},s.a.createElement(S.a,{type:"user",className:"nav-icon",style:{marginRight:0}})," ",s.a.createElement(S.a,{type:"down"})))}var de=Object(p.g)(me),pe=a(186),ge=function(e){var t=e.component,a=e.authenticated,n=Object(pe.a)(e,["component","authenticated"]);return s.a.createElement(p.b,Object.assign({},n,{render:function(e){return a?s.a.createElement(t,Object.assign({},n,e)):s.a.createElement(p.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},ve=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{style:{paddingTop:"30px",paddingBottom:"30px",textAlign:"center"}},s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement(S.a,{type:"exclamation-circle",style:{fontSize:"30px"}})),s.a.createElement("h1",null,"The route you requested is not accesssible!"))}}]),a}(n.Component),fe=d.a.Content,be=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={currentUser:null,isAuthenticated:!1,isLoading:!1},n.handleLogout=n.handleLogout.bind(Object(u.a)(n)),n.loadCurrentUser=n.loadCurrentUser.bind(Object(u.a)(n)),n.handleLogin=n.handleLogin.bind(Object(u.a)(n)),o.a.config({placement:"topRight",top:70,duration:3}),n}return Object(c.a)(a,[{key:"loadCurrentUser",value:function(){var e=this;this.setState({isLoading:!0}),(localStorage.getItem("accessToken")?v({url:g+"/user/me",method:"GET"}):Promise.reject("No access token set.")).then((function(t){e.setState({currentUser:t,isAuthenticated:!0,isLoading:!1})})).catch((function(t){e.setState({isLoading:!1})}))}},{key:"componentDidMount",value:function(){this.loadCurrentUser()}},{key:"componentWillMount",value:function(){}},{key:"handleLogout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"You're successfully logged out.";localStorage.removeItem("accessToken"),this.setState({currentUser:null,isAuthenticated:!1}),this.props.history.push(e),o.a[t]({message:"Polling App",description:a})}},{key:"handleLogin",value:function(){o.a.success({message:"Polling App",description:"You're successfully logged in."}),this.loadCurrentUser(),this.props.history.push("/")}},{key:"render",value:function(){var e=this;return this.state.isLoading?s.a.createElement(U,null):s.a.createElement(d.a,{className:"app-container"},s.a.createElement(de,{isAuthenticated:this.state.isAuthenticated,currentUser:this.state.currentUser,onLogout:this.handleLogout}),s.a.createElement(fe,{className:"app-content"},s.a.createElement("div",{className:"container"},s.a.createElement(p.d,null,s.a.createElement(p.b,{exact:!0,path:"/",render:function(t){return s.a.createElement(T,Object.assign({isAuthenticated:e.state.isAuthenticated,currentUser:e.state.currentUser,handleLogout:e.handleLogout},t))}}),s.a.createElement(p.b,{path:"/login",render:function(t){return e.state.isAuthenticated?s.a.createElement(ve,null):s.a.createElement(Q,Object.assign({onLogin:e.handleLogin},t))}}),s.a.createElement(p.b,{path:"/signup",render:function(t){return e.state.isAuthenticated?s.a.createElement(ve,null):s.a.createElement(ee,t)}}),s.a.createElement(p.b,{path:"/users/:username",render:function(t){return s.a.createElement(re,Object.assign({isAuthenticated:e.state.isAuthenticated,currentUser:e.state.currentUser},t))}}),s.a.createElement(ge,{authenticated:this.state.isAuthenticated,path:"/poll/new",component:W,handleLogout:this.handleLogout}),s.a.createElement(p.b,{component:ae})))))}}]),a}(n.Component),Ee=Object(p.g)(be);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(N.a,null,s.a.createElement(Ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[188,1,2]]]);
//# sourceMappingURL=main.333c9efa.chunk.js.map